# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ `DEPLOYMENT.md`, –∞ –≤ `.env` –∑–∞–¥–∞–Ω—ã –∫–ª—é—á–∏ ASPRO –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è —É–ø–æ–º–∏–Ω–∞–Ω–∏–π.

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
ASPRO_API_KEY=...
ASPRO_COMPANY=...
ASPRO_EVENT_CALENDAR_ID=49   # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å
```

### 3. –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```bash
python -m kadbot.cli health              # –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏/–ë–î/CRM
python -m kadbot.cli sync                # –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –ë–î
```

## üìã –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏:
- `kadbot/crm/calendar.py` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –∫–∞–ª–µ–Ω–¥–∞—Ä—è
- `kadbot/kad/parser.py` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ ¬´–°–ª–µ–¥—É—é—â–µ–µ –∑–∞—Å–µ–¥–∞–Ω–∏–µ¬ª –∏ —Ç—Ä–∏–≥–≥–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π
- `kadbot/crm/client.py` ‚Äî HTTP‚Äë–∫–ª–∏–µ–Ω—Ç Aspro —Å —Ä–µ—Ç—Ä–∞—è–º–∏

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è |
|------------|----------|--------------|
| `ASPRO_API_KEY` | API –∫–ª—é—á –æ—Ç Aspro.Cloud | –î–∞ |
| `ASPRO_COMPANY` | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ –≤ Aspro | –î–∞ |
| `ASPRO_EVENT_CALENDAR_ID` | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π ID –∫–∞–ª–µ–Ω–¥–∞—Ä—è | –ù–µ—Ç |

### –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–∞
1. –í–æ–π–¥–∏—Ç–µ –≤ Aspro.Cloud
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí API
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ –ø–∞—Ä—Å–µ—Ä
```bash
python -m kadbot.cli parse --batch-size 10 --pause-between-batches 5
```
–û–∂–∏–¥–∞–µ—Ç—Å—è, —á—Ç–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –±–ª–æ–∫–∞ ¬´–°–ª–µ–¥—É—é—â–µ–µ –∑–∞—Å–µ–¥–∞–Ω–∏–µ¬ª –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–µ–ª –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ —Å–æ–±—ã—Ç–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –≤ CRM. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º. –≤ –ª–æ–≥–µ `kad_parser.log`.

### –¢–µ—Å—Ç 2: –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ API –∫–∞–ª–µ–Ω–¥–∞—Ä—è (—á–µ—Ä–µ–∑ Python)
```python
from datetime import datetime
from kadbot.crm.calendar import create_project_calendar_event

create_project_calendar_event(
    project_id=123,
    case_number="–ê32-29491/2023",
    start_dt=datetime(2025, 9, 15, 10, 0),
    duration_minutes=60,
    room="205",
)
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥-—Ñ–∞–π–ª: `kad_parser.log`
–ò—â–∏—Ç–µ –∑–∞–ø–∏—Å–∏:
```
INFO - –°–æ–∑–¥–∞—é —Å–æ–±—ã—Ç–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –¥–ª—è –¥–µ–ª–∞ {–Ω–æ–º–µ—Ä}
INFO - –°–æ–±—ã—Ç–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ –≤ CRM
ERROR - –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä—Å–µ—Ä
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–æ–±—ã—Ç–∏—è –ø–æ—è–≤–∏–ª–∏—Å—å –≤ CRM

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞: "api key not found"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `ASPRO_API_KEY`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á –∞–∫—Ç–∏–≤–µ–Ω –≤ Aspro.Cloud

### –û—à–∏–±–∫–∞: "ModuleNotFoundError: No module named 'requests'"
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞: `pip install -r requirements.txt`

### –û—à–∏–±–∫–∞: "ASPRO_API_KEY/ASPRO_COMPANY –Ω–µ –∑–∞–¥–∞–Ω—ã"
```bash
echo $ASPRO_API_KEY
echo $ASPRO_COMPANY
# –ï—Å–ª–∏ –ø—É—Å—Ç–æ, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```

### –°–æ–±—ã—Ç–∏—è –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥ –Ω–∞ –æ—à–∏–±–∫–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞–π–¥–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞—Å–µ–¥–∞–Ω–∏–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API Aspro.Cloud

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–¥–∞:
1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä—Å–µ—Ä/—Å–µ—Ä–≤–∏—Å
2. –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª—ã (`git pull`)
3. –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`pip install -r requirements.txt`)
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î: `python -m kadbot.db.migrate`
5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python -m kadbot.cli parse`

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- –¢–∞–π–º–∞—É—Ç API –∑–∞–ø—Ä–æ—Å–æ–≤: 15 —Å–µ–∫—É–Ω–¥
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏: –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API
- –õ–æ–≥–∏—Ä—É–π—Ç–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è —Å–æ–±—ã—Ç–∏–π

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
env | grep ASPRO

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f kad_parser.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
find . -name "*.py" -exec python -m py_compile {} \;
```

### –ö–æ–Ω—Ç–∞–∫—Ç—ã:
- –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ª–æ–≥–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –û–ø–∏—à–∏—Ç–µ —à–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
